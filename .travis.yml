language: python
matrix:
  include:
    - python: 2.7
      env: TOXENV=py27
    - python: 3.5
      env: TOXENV=py35
    - python: 3.6
      env: TOXENV=py36
    - python: 3.7
      env: TOXENV=py37
      dist: xenial
      sudo: true
    - python: pypy3.5
      env: TOXENV=pypy
    - python: 3.7
      env: TOXENV=flake8
      dist: xenial
      sudo: true
    - python: 3.7
      env: TOXENV=mypy
      dist: xenial
      sudo: true
before_install:
  - git submodule update --init
install:
  - pip install tox
  - if test "$TOXENV" = py27 ; then pip install --upgrade "pytest<5.0.0"; fi
  - if test "$TOXENV" = py37 ; then pip install coveralls ; fi
  - python setup.py dataset
script: 
  - tox
after_script:
  - if test "$TOXENV" = py37 ; then coveralls ; fi
